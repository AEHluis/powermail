{namespace vh=In2code\Powermail\ViewHelpers}
<f:layout name="Backend"/>


	Show Backend Module: Powermail List

<f:section name="content">

	<h1><f:translate key="BackendCheckTitle">Powermail Function Check</f:translate></h1>


	<h2 class="powermail-padding-top"><f:translate key="BackendFunctionTitle">Function Tests</f:translate></h2>

	<f:switch expression="{vh:BeCheck.PowermailVersionNote()}">
		<f:case value="0">
			<div class="typo3-message message-warning powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckVersionTitle">Version</f:translate>
						{vh:BeCheck.PowermailVersion()}
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckVersionNoInformation">It could not be verified if this version is secure or unsecure</f:translate>

						(<f:translate key="BackendCheckVersionLastUpdate">Last update:</f:translate>
						<f:format.date format="{f:translate(key:'datepicker_format_datetime', default:'Y-m-d')}">@{vh:BeCheck.LastUpdateExtensionRepository()}</f:format.date>)
					</p>
				</div>
			</div>
		</f:case>
		<f:case value="1">
			<div class="typo3-message message-ok powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckVersionTitle">Version</f:translate>
						{vh:BeCheck.PowermailVersion()}
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckVersionUpToDate">Powermail version is up-to-date</f:translate>

						(<f:translate key="BackendCheckVersionLastUpdate">Last update:</f:translate>
						<f:format.date format="{f:translate(key:'datepicker_format_datetime', default:'Y-m-d')}">@{vh:BeCheck.LastUpdateExtensionRepository()}</f:format.date>)
					</p>
				</div>
			</div>
		</f:case>
		<f:case value="2">
			<div class="typo3-message message-error powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckVersionTitle">Version</f:translate>
						{vh:BeCheck.PowermailVersion()}
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckVersionSecurity">The installed powermail version is not secure, please update your version as soon as possible!</f:translate>

						(<f:translate key="BackendCheckVersionLastUpdate">Last update:</f:translate>
						<f:format.date format="{f:translate(key:'datepicker_format_datetime', default:'Y-m-d')}">@{vh:BeCheck.LastUpdateExtensionRepository()}</f:format.date>)
					</p>
				</div>
			</div>
		</f:case>
		<f:case value="3">
			<div class="typo3-message message-information powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckVersionTitle">Version</f:translate>
						{vh:BeCheck.PowermailVersion()}
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckVersionUpgrade">A newer powermail version is available</f:translate>

						(<f:translate key="BackendCheckVersionLastUpdate">Last update:</f:translate>
						<f:format.date format="{f:translate(key:'datepicker_format_datetime', default:'Y-m-d')}">@{vh:BeCheck.LastUpdateExtensionRepository()}</f:format.date>)
					</p>
				</div>
			</div>
		</f:case>
	</f:switch>

	<f:if condition="{vh:BeCheck.T3Version()}">
		<f:then>
			<div class="typo3-message message-ok powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckT3VersionTitle" />
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckT3VersionCorrect" />
					</p>
				</div>
			</div>
		</f:then>
		<f:else>
			<div class="typo3-message message-error powermail-message">
				<div class="message-header">
					<f:translate key="BackendCheckT3VersionTitle" />
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckT3VersionFailed" />
					</p>
				</div>
			</div>
		</f:else>
	</f:if>

	<f:if condition="{settings.staticTemplate}">
		<f:then>
			<div class="typo3-message message-ok powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckStaticTemplateTitle" />
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckStaticTemplateCorrect" />
						<f:be.pagePath /> ({pid})
					</p>
				</div>
			</div>
		</f:then>
		<f:else>
			<div class="typo3-message message-warning powermail-message">
				<div class="message-header">
					<f:translate key="BackendCheckStaticTemplateTitle" />
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckStaticTemplateFailed" />
						<f:be.pagePath /> ({pid})
					</p>
				</div>
			</div>
		</f:else>
	</f:if>

	<f:if condition="{vh:BeCheck.Session()}">
		<f:then>
			<div class="typo3-message message-ok powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckSessionTitle" />
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckSessionCorrect" />
					</p>
				</div>
			</div>
		</f:then>
		<f:else>
			<div class="typo3-message message-error powermail-message">
				<div class="message-header">
					<f:translate key="BackendCheckSessionTitle" />
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckSessionFailed" />
					</p>
				</div>
			</div>
		</f:else>
	</f:if>

	<f:if condition="{vh:BeCheck.ExtMngConfig()}">
		<f:then>
			<div class="typo3-message message-ok powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckExtMngConfigTitle" />
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckExtMngConfigCorrect" />
					</p>
				</div>
			</div>
		</f:then>
		<f:else>
			<div class="typo3-message message-error powermail-message">
				<div class="message-header">
					<f:translate key="BackendCheckExtMngConfigTitle" />
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckExtMngConfigFailed" />
					</p>
				</div>
			</div>
		</f:else>
	</f:if>

	<f:if condition="{vh:BeCheck.UploadsFolder()}">
		<f:then>
			<div class="typo3-message message-ok powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckUploadsFolderTitle" />
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckUploadsFolderCorrect" />
					</p>
				</div>
			</div>
		</f:then>
		<f:else>
			<div class="typo3-message message-error powermail-message">
				<div class="message-header">
					<f:translate key="BackendCheckUploadsFolderTitle" />
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckUploadsFolderFailed" />
					</p>
					<f:form action="fixUploadFolder">
						<input type="submit" value="{f:translate(key:'BackendCheckTryToFix', default:'Solve problem')}" />
					</f:form>
				</div>
			</div>
		</f:else>
	</f:if>

	<f:if condition="{vh:BeCheck.CheckWrongLocalizedForms()}">
		<f:then>
			<div class="typo3-message message-ok powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckWrongLocalizedFormsTitle">Localized Forms</f:translate>
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckWrongLocalizedFormsCorrect">No failures found</f:translate>
					</p>
				</div>
			</div>
		</f:then>
		<f:else>
			<div class="typo3-message message-error powermail-message">
				<div class="message-header">
					<f:translate key="BackendCheckWrongLocalizedFormsTitle">Localized Forms</f:translate>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckWrongLocalizedFormsFailed">Broken localized Forms found</f:translate>
					</p>
					<f:form action="fixWrongLocalizedForms">
						<input type="submit" value="{f:translate(key:'BackendCheckTryToFix', default:'Solve problem')}" />
						<p><strong><f:translate key="BackendCheckBackupBefore">Please backup before!</f:translate></strong></p>
					</f:form>
				</div>
			</div>
		</f:else>
	</f:if>

	<f:if condition="{vh:BeCheck.CheckFilledMarkersInLocalizedFields()}">
		<f:then>
			<div class="typo3-message message-ok powermail-message">
				<div class="header-container">
					<div class="message-header">
						<f:translate key="BackendCheckLocalizedFieldsWithFilledMarkersTitle">Localized Fields</f:translate>
					</div>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckLocalizedFieldsWithFilledMarkersCorrect">No failures found</f:translate>
					</p>
				</div>
			</div>
		</f:then>
		<f:else>
			<div class="typo3-message message-error powermail-message">
				<div class="message-header">
					<f:translate key="BackendCheckWrongLocalizedFormsTitle">Localized Fields</f:translate>
				</div>
				<div class="message-body">
					<p>
						<f:translate key="BackendCheckLocalizedFieldsWithFilledMarkersFailed">Failures found</f:translate>
					</p>
					<f:form action="fixFilledMarkersInLocalizedFields">
						<input type="submit" value="{f:translate(key:'BackendCheckTryToFix', default:'Solve problem')}" />
						<p><strong><f:translate key="BackendCheckBackupBefore">Please backup before!</f:translate></strong></p>
					</f:form>
				</div>
			</div>
		</f:else>
	</f:if>






	<h2 class="powermail-padding-top"><f:translate key="BackendEmailTitle">Test Email Transmission</f:translate></h2>

	<f:if condition="{email}">
		<f:if condition="{issent}">
			<f:then>
				<div class="typo3-message message-ok powermail-message">
					<div class="header-container">
						<div class="message-header">
							<f:translate key="BackendCheckEmailTitle" />
						</div>
					</div>
					<div class="message-body">
						<p>
							<f:translate key="BackendCheckEmailCorrect" />
						</p>
					</div>
				</div>
			</f:then>
			<f:else>
				<div class="typo3-message message-error powermail-message">
					<div class="message-header">
						<f:translate key="BackendCheckEmailTitle" />
					</div>
					<div class="message-body">
						<p>
							<f:translate key="BackendCheckEmailFailed" />
						</p>
					</div>
				</div>
			</f:else>
		</f:if>
	</f:if>
	<div class="typo3-message message-notice powermail-message">
		<div class="message-header powermail-padding-bottom">
			<f:translate key="BackendEmailFormTitle" />
		</div>
		<div class="message-body powermail-padding-bottom powermail_email">
			<f:form action="checkBe" controller="Module">
				<label for="powermail_email">
					<f:translate key="BackendEmailFormReceiver" />
				</label>
				<f:form.textfield name="email" value="" id="powermail_email" class="powermail_email_input" />
				<f:form.submit value="Send Mail Now" class="powermail_email_submit" />
			</f:form>
		</div>
	</div>

</f:section>